<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Programmation des Soins</title>

  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root{
      --bg:#f5f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --line:#e5e7eb;
      --shadow: 0 12px 30px rgba(15, 23, 42, .10);
      --radius: 16px;

      --primary:#2f6fed;
      --primary2:#1e88e5;
      --primary-dark:#355f8e;
      --chip:#eef2f6;

      --ok:#22c55e;
      --warn:#f59e0b;
      --danger:#ef4444;

      --ok-weak:#dcfce7;
      --warn-weak:#fef3c7;
      --danger-weak:#fee2e2;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background: var(--bg);
    }

    /* ====== Layout container ====== */
    .wrap{
      max-width: 1280px;
      margin: 0 auto;
      padding: 22px 22px 50px;
    }

    /* ====== Top brand header (comme tes screens) ====== */
    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 16px;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 14px;
    }
    .logo{
      width:54px;height:54px;
      border-radius: 14px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, #2f6fed, #42c2ff);
      color:#fff;
      box-shadow: 0 14px 26px rgba(47,111,237,.25);
    }
    .brand h1{
      margin:0;
      font-size: 30px;
      font-weight: 900;
      color: #1f7fbf;
      letter-spacing:.2px;
    }
    .brand p{
      margin:2px 0 0;
      color: var(--muted);
      font-size: 13px;
      font-weight: 600;
    }

    .date-pill{
      background:#fff;
      border:1px solid var(--line);
      border-radius: 12px;
      padding: 10px 12px;
      min-width: 190px;
      box-shadow: 0 10px 20px rgba(15,23,42,.06);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .date-pill .left{
      display:flex;
      gap: 10px;
      align-items:center;
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
    }
    .date-pill .right{
      text-align:right;
      font-weight: 900;
      font-size: 13px;
    }

    /* ====== Main menu (ligne sous le titre) ====== */
    .nav{
      display:flex;
      align-items:center;
      gap: 14px;
      flex-wrap:wrap;
      margin: 8px 0 18px;
    }
    .nav a{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      text-decoration:none;
      color: var(--muted);
      font-weight: 700;
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 999px;
      transition: .15s background, .15s color, .15s box-shadow;
    }
    .nav a:hover{ background:#fff; box-shadow: 0 10px 18px rgba(15,23,42,.06); color: var(--text); }
    .nav a.active{
      background: #355f8e;
      color:#fff;
      box-shadow: 0 10px 18px rgba(53,95,142,.18);
    }

    /* ====== Inner tabs bar (Planification / Suivi / Documents / Calendrier) ====== */
    .inner-tabs{
      background:#fff;
      border:1px solid var(--line);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 10px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin: 18px 0 18px;
    }
    .inner-tab{
      border:1px solid transparent;
      background: transparent;
      border-radius: 12px;
      padding: 14px 12px;
      cursor:pointer;
      font-weight: 900;
      color: var(--muted);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      transition:.15s background, .15s color, .15s box-shadow, .15s border-color;
    }
    .inner-tab:hover{ background:#f8fafc; color:var(--text); }
    .inner-tab.active{
      background: linear-gradient(90deg, #2f6fed, #42c2ff);
      color:#fff;
      box-shadow: 0 14px 26px rgba(47,111,237,.18);
      border-color: rgba(255,255,255,.25);
    }

    /* ====== Panels ====== */
    .panel{
      background:#fff;
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .panel-title{
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 900;
      font-size: 16px;
    }
    .panel-sub{
      color: var(--muted);
      font-size: 13px;
      font-weight: 600;
      margin: 6px 0 14px;
    }

    .view{display:none;}
    .view.active{display:block;}

    /* ====== Reprogrammation list ====== */
    .patient-card{
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      background:#fff;
      box-shadow: 0 10px 20px rgba(15,23,42,.05);
      margin-bottom: 12px;
    }
    .patient-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .p-left{display:flex; align-items:center; gap: 12px;}
    .avatar{
      width:36px;height:36px;
      border-radius: 999px;
      background:#eff6ff;
      display:grid;place-items:center;
      color: var(--primary-dark);
      font-weight:900;
    }
    .p-name{font-weight: 900; font-size: 14px;}
    .p-proto{color: var(--muted); font-weight: 700; font-size: 12px; margin-top: 2px;}
    .btn-mini{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 10px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 900;
      font-size: 12px;
      display:inline-flex;
      align-items:center;
      gap: 10px;
    }
    .btn-mini.primary{
      background:#2f6fed;
      border-color:#2f6fed;
      color:#fff;
      box-shadow: 0 12px 20px rgba(47,111,237,.16);
    }

    .cycles{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    .cycle{
      border:1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      background:#f8fafc;
      min-height: 84px;
    }
    .cycle .c{
      font-weight: 900;
      font-size: 12px;
      color: var(--primary-dark);
    }
    .cycle .date{
      margin-top:6px;
      font-weight: 900;
      font-size: 13px;
    }
    .cycle .day{
      margin-top:4px;
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
    }

    /* ====== Suivi médical (EI) ====== */
    .ei-top-tabs{
      border:1px solid var(--line);
      border-radius: 12px;
      background:#fff;
      display:flex;
      overflow:hidden;
      box-shadow: 0 10px 20px rgba(15,23,42,.06);
      margin: 10px 0 16px;
    }
    .ei-top-tabs button{
      flex:1;
      border:none;
      background:#fff;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 900;
      color: var(--muted);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
    }
    .ei-top-tabs button.active{
      background:#f8fafc;
      color:#0f172a;
      box-shadow: inset 0 -3px 0 #2f6fed;
    }

    .ei-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-top: 12px;
    }
    .ei-patient{
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 10px 20px rgba(15,23,42,.05);
      background:#fff;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      min-height: 82px;
    }
    .tag{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 999px;
      padding: 6px 10px;
      font-weight: 900;
      font-size: 12px;
      color: var(--muted);
    }
    .tag.ok{ color:#166534; background:var(--ok-weak); border-color: rgba(34,197,94,.35);}

    .big-cta{
      margin-top: 18px;
      width:100%;
      border:none;
      border-radius: 12px;
      padding: 14px 16px;
      font-weight: 900;
      color:#fff;
      cursor:pointer;
      background:#355f8e;
      box-shadow: 0 14px 26px rgba(53,95,142,.18);
      display:flex;
      justify-content:center;
      gap:10px;
      align-items:center;
    }

    /* ====== Documents ====== */
    .filters{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr auto;
      gap: 12px;
      align-items:end;
      margin: 12px 0 16px;
    }
    .field label{
      display:flex;
      gap:10px;
      align-items:center;
      font-weight: 900;
      font-size: 12px;
      color:#0f172a;
      margin-bottom: 6px;
    }
    .field select{
      width:100%;
      border:1px solid var(--line);
      border-radius: 10px;
      padding: 10px 10px;
      background:#fff;
      font-weight: 800;
      color:#0f172a;
    }
    .btn-add{
      height: 40px;
      border:1px solid #355f8e;
      background:#355f8e;
      border-radius: 12px;
      padding: 0 14px;
      color:#fff;
      font-weight: 900;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 14px 22px rgba(53,95,142,.18);
    }

    .doc-block{
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      margin-top: 12px;
      background:#fff;
      box-shadow: 0 10px 20px rgba(15,23,42,.05);
    }
    .doc-head{
      display:flex;align-items:center;gap: 10px;
      font-weight: 900;
      font-size: 18px;
    }
    .pill{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 999px;
      padding: 6px 10px;
      font-weight: 900;
      font-size: 12px;
      margin-left: 10px;
      color:#0f172a;
    }

    .doc-item{
      margin-top: 12px;
      border:1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      background:#f8fafc;
      display:flex;
      justify-content:space-between;
      gap: 14px;
      align-items:flex-start;
    }
    .doc-item h4{
      margin:0;
      font-weight: 900;
      font-size: 14px;
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .doc-item p{
      margin:6px 0 0;
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
    }
    .doc-actions{
      display:flex;
      gap: 8px;
    }
    .icon-btn{
      width:36px;height:36px;
      border:1px solid var(--line);
      background:#fff;
      border-radius: 10px;
      display:grid;
      place-items:center;
      cursor:pointer;
      color:#0f172a;
    }

    .badge{
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      font-weight: 900;
      border: 1px solid var(--line);
      background:#fff;
      margin-left: 8px;
    }
    .badge.ok{background:var(--ok-weak); border-color: rgba(34,197,94,.35); color:#166534;}
    .badge.warn{background:var(--warn-weak); border-color: rgba(245,158,11,.35); color:#92400e;}

    /* ====== Calendar ====== */
    .cal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin: 12px 0 10px;
    }
    .cal-nav{
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .cal-btn{
      width:34px;height:34px;
      border:1px solid var(--line);
      border-radius: 10px;
      background:#fff;
      cursor:pointer;
      display:grid;place-items:center;
    }
    .cal-month{
      font-weight: 900;
      font-size: 14px;
      text-transform: lowercase;
    }
    .cal-grid{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .cal-dayname{
      color: var(--muted);
      font-weight: 900;
      font-size: 12px;
      text-align:center;
      padding: 6px 0;
    }
    .cal-cell{
      border:1px solid var(--line);
      border-radius: 12px;
      background:#fff;
      height: 86px;
      padding: 10px;
      position:relative;
    }
    .cal-cell .n{
      font-weight: 900;
      font-size: 12px;
      color:#0f172a;
    }
    .cal-cell.active{
      outline: 2px solid #355f8e;
      outline-offset: -2px;
    }

    /* ====== Modal (Reprogrammation intelligente) ====== */
    .modal{ position:fixed; inset:0; display:none; z-index:9999; }
    .modal.open{ display:block; }
    .backdrop{ position:absolute; inset:0; background: rgba(15,23,42,.65); }

    .modal-card{
      position:relative;
      width: min(520px, calc(100% - 32px));
      margin: 90px auto;
      background:#fff;
      border:1px solid var(--line);
      border-radius: 14px;
      box-shadow: 0 30px 80px rgba(15,23,42,.35);
      overflow:hidden;
    }
    .modal-head{
      padding: 14px 14px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      border-bottom: 1px solid var(--line);
    }
    .modal-title{
      font-weight: 900;
      font-size: 15px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .xbtn{
      border:none;
      background:transparent;
      cursor:pointer;
      padding: 8px;
      border-radius: 10px;
      color:#475569;
    }
    .xbtn:hover{ background:#f1f5f9; }

    .modal-body{ padding: 14px; }
    .modal-patient{
      border:1px solid #cfe3ff;
      background:#f3f8ff;
      border-radius: 12px;
      padding: 12px;
      font-weight: 900;
      font-size: 13px;
    }
    .modal-patient small{
      display:block;
      margin-top: 4px;
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
    }
    .form{
      margin-top: 12px;
      display:grid;
      gap: 10px;
    }
    .form label{
      font-weight: 900;
      font-size: 12px;
      color:#0f172a;
    }
    .form select, .form input{
      width:100%;
      border:1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      font-weight: 800;
    }
    .form .suggest{
      border:1px solid #cfe3ff;
      background:#fff;
      border-radius: 10px;
      padding: 10px;
      font-weight: 900;
      cursor:pointer;
      display:flex;
      justify-content:center;
      gap: 10px;
      align-items:center;
    }
    .modal-actions{
      margin-top: 12px;
      display:flex;
      gap: 10px;
    }
    .btn{
      flex:1;
      border-radius: 10px;
      padding: 10px 12px;
      font-weight: 900;
      cursor:pointer;
      border:1px solid var(--line);
      background:#fff;
    }
    .btn.primary{
      background:#a7c7ff;
      border-color:#a7c7ff;
      color:#fff;
      cursor:not-allowed;
    }

    /* responsive */
    @media (max-width: 980px){
      .cycles{grid-template-columns: 1fr 1fr;}
      .ei-grid{grid-template-columns: 1fr;}
      .filters{grid-template-columns: 1fr; }
      .inner-tabs{grid-template-columns: 1fr 1fr;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- TOP HEADER -->
    <div class="top">
      <div class="brand">
        <div class="logo"><i class="fa-solid fa-wave-square"></i></div>
        <div>
          <h1>Programmation des Soins</h1>
          <p>Gestion intelligente des intervalles thérapeutiques</p>
        </div>
      </div>

      <div class="date-pill">
        <div class="left">
          <i class="fa-regular fa-calendar"></i>
          <span>30 décembre 2025</span>
        </div>
        <div class="right">Mardi</div>
      </div>
    </div>

    <!-- MAIN NAV -->
    <nav class="nav">
      <a href="#"><i class="fa-solid fa-gear"></i> Tableau de Bord</a>
      <a href="#"><i class="fa-solid fa-wave-square"></i> Planning Quotidien</a>
      <a class="active" href="#"><i class="fa-regular fa-calendar"></i> Programmation</a>
      <a href="#"><i class="fa-solid fa-users"></i> Planning Infirmier</a>
      <a href="#"><i class="fa-solid fa-user-plus"></i> Nouveau Patient</a>
    </nav>

    <!-- INNER TABS -->
    <div class="inner-tabs" role="tablist" aria-label="Onglets Programmation">
      <button class="inner-tab active" data-view="planif"><i class="fa-regular fa-clock"></i> Planification</button>
      <button class="inner-tab" data-view="suivi"><i class="fa-solid fa-wave-square"></i> Suivi Médical</button>
      <button class="inner-tab" data-view="docs"><i class="fa-regular fa-file-lines"></i> Documents</button>
      <button class="inner-tab" data-view="cal"><i class="fa-regular fa-calendar-days"></i> Calendrier</button>
    </div>

    <!-- ===== VIEW: PLANIFICATION ===== -->
    <section class="panel view active" id="view-planif">
      <div class="panel-title"><i class="fa-solid fa-rotate" style="color:#a855f7"></i> Reprogrammation</div>
      <div class="panel-sub">Reprogrammez les cures avec optimisation automatique</div>

      <!-- Patient 1 (simple) -->
      <div class="patient-card">
        <div class="patient-head">
          <div class="p-left">
            <div class="avatar"><i class="fa-solid fa-user"></i></div>
            <div>
              <div class="p-name">Gabriel I.</div>
              <div class="p-proto">FOLFOX</div>
            </div>
          </div>
          <button class="btn-mini" type="button" disabled title="Exemple">
            <i class="fa-regular fa-circle-check"></i> OK
          </button>
        </div>
      </div>

      <!-- Patient 2 (avec cycles) -->
      <div class="patient-card">
        <div class="patient-head">
          <div class="p-left">
            <div class="avatar"><i class="fa-solid fa-user"></i></div>
            <div>
              <div class="p-name">Brian R.</div>
              <div class="p-proto">FOLFIRINOX</div>
            </div>
          </div>
          <button class="btn-mini primary" type="button" data-action="open-reprog" data-name="Brian R.">
            <i class="fa-solid fa-wand-magic-sparkles"></i> Reprogrammer
          </button>
        </div>

        <div class="cycles">
          <div class="cycle">
            <div class="c">C2</div>
            <div class="date">13/01/2026</div>
            <div class="day">mardi</div>
          </div>
          <div class="cycle">
            <div class="c">C3</div>
            <div class="date">27/01/2026</div>
            <div class="day">mardi</div>
          </div>
          <div class="cycle">
            <div class="c">C4</div>
            <div class="date">10/02/2026</div>
            <div class="day">mardi</div>
          </div>
          <div class="cycle" style="opacity:.25"></div>
        </div>
      </div>

      <!-- Patient 3 -->
      <div class="patient-card">
        <div class="patient-head">
          <div class="p-left">
            <div class="avatar"><i class="fa-solid fa-user"></i></div>
            <div>
              <div class="p-name">Tittly F.</div>
              <div class="p-proto">FOLFIRINOX</div>
            </div>
          </div>
          <button class="btn-mini" type="button" data-action="open-reprog" data-name="Tittly F.">
            <i class="fa-solid fa-wand-magic-sparkles"></i> Reprogrammer
          </button>
        </div>

        <div class="cycles">
          <div class="cycle"><div class="c">C2</div><div class="date">13/01/2026</div><div class="day">mardi</div></div>
          <div class="cycle"><div class="c">C3</div><div class="date">27/01/2026</div><div class="day">mardi</div></div>
          <div class="cycle"><div class="c">C4</div><div class="date">10/02/2026</div><div class="day">mardi</div></div>
          <div class="cycle" style="opacity:.25"></div>
        </div>
      </div>

      <div class="patient-card" style="margin-bottom:0">
        <div class="patient-head">
          <div class="p-left">
            <div class="avatar"><i class="fa-solid fa-user"></i></div>
            <div>
              <div class="p-name">Joane L.</div>
              <div class="p-proto">FOLFOX</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== VIEW: SUIVI MEDICAL ===== -->
    <section class="panel view" id="view-suivi">
      <div class="panel-title"><i class="fa-solid fa-triangle-exclamation" style="color:var(--danger)"></i> Événements Indésirables</div>
      <div class="panel-sub">Déclarez et gérez les événements indésirables</div>

      <div class="ei-top-tabs" role="tablist" aria-label="Sous-onglets EI">
        <button class="active" data-ei="declare"><i class="fa-solid fa-plus"></i> Déclarer un EI</button>
        <button data-ei="base"><i class="fa-solid fa-magnifying-glass"></i> Base d'événements</button>
        <button data-ei="history"><i class="fa-regular fa-clock"></i> Historique</button>
      </div>

      <div class="view active" id="ei-declare">
        <div class="panel-title" style="margin-top:6px;">
          <span style="width:30px;height:30px;border-radius:10px;background:var(--danger-weak);display:grid;place-items:center;color:var(--danger)">
            <i class="fa-solid fa-triangle-exclamation"></i>
          </span>
          Déclaration d'Événement Indésirable
        </div>

        <div class="ei-grid">
          <div class="ei-patient" style="border-color:#93c5fd;background:#eff6ff">
            <div>
              <div class="p-name">Gabriel I.</div>
              <div class="p-proto">FOLFOX</div>
              <button class="btn-mini primary" style="margin-top:10px;width:100%;justify-content:center">
                <i class="fa-solid fa-plus"></i> Déclarer EI
              </button>
            </div>
            <span class="tag ok">Actif</span>
          </div>

          <div class="ei-patient">
            <div>
              <div class="p-name">Brian R.</div>
              <div class="p-proto">FOLFIRINOX</div>
            </div>
            <span class="tag ok">Actif</span>
          </div>

          <div class="ei-patient">
            <div>
              <div class="p-name">Tittly F.</div>
              <div class="p-proto">FOLFIRINOX</div>
            </div>
            <span class="tag ok">Actif</span>
          </div>

          <div class="ei-patient"><div><div class="p-name">Joane L.</div><div class="p-proto">FOLFOX</div></div><span class="tag ok">Actif</span></div>
          <div class="ei-patient"><div><div class="p-name">Brian R.</div><div class="p-proto">CarboVP 16</div></div><span class="tag ok">Actif</span></div>
          <div class="ei-patient"><div><div class="p-name">Brian R.</div><div class="p-proto">CarboVP 16</div></div><span class="tag ok">Actif</span></div>
          <div class="ei-patient"><div><div class="p-name">Brian R.</div><div class="p-proto">Taxol hebdo</div></div><span class="tag ok">Actif</span></div>
          <div class="ei-patient"><div><div class="p-name">Emma L.</div><div class="p-proto">FOLFIRINOX</div></div><span class="tag ok">Actif</span></div>
          <div class="ei-patient"><div><div class="p-name">Emma L.</div><div class="p-proto">FOLFIRINOX</div></div><span class="tag ok">Actif</span></div>
        </div>

        <button class="big-cta" type="button">
          <i class="fa-solid fa-triangle-exclamation"></i>
          Ouvrir la déclaration pour Gabriel I.
        </button>
      </div>

      <div class="view" id="ei-base">
        <div class="panel-title" style="margin-top:6px;">
          <span style="width:30px;height:30px;border-radius:10px;background:#e0f2fe;display:grid;place-items:center;color:#0284c7">
            <i class="fa-solid fa-magnifying-glass"></i>
          </span>
          Base de Données des Événements Indésirables
        </div>

        <div class="patient-card" style="margin-top:14px">
          <div class="p-name" style="display:flex;align-items:center;gap:10px">
            <i class="fa-solid fa-droplet" style="color:#ef4444"></i>
            Hématologique <span class="pill">4 événements</span>
          </div>

          <div class="cycles" style="grid-template-columns: repeat(3, 1fr); margin-top:12px">
            <div class="cycle" style="background:#fff">
              <div class="p-name">Neutropénie</div>
              <div class="p-proto">Diminution du nombre de neutrophiles</div>
            </div>
            <div class="cycle" style="background:#fff">
              <div class="p-name">Thrombopénie</div>
              <div class="p-proto">Diminution du nombre de plaquettes</div>
            </div>
            <div class="cycle" style="background:#fff">
              <div class="p-name">Anémie</div>
              <div class="p-proto">Diminution du taux d’hémoglobine</div>
            </div>
          </div>

          <div class="cycles" style="grid-template-columns: repeat(3, 1fr); margin-top:10px">
            <div class="cycle" style="background:#fff;border-color:#fecaca">
              <div class="p-name">Neutropénie fébrile <span class="badge warn">4</span></div>
              <div class="p-proto">Neutropénie associée à une fièvre</div>
            </div>
          </div>
        </div>

        <div class="patient-card">
          <div class="p-name" style="display:flex;align-items:center;gap:10px">
            <i class="fa-solid fa-wave-square" style="color:#0ea5e9"></i>
            Gastro-intestinal <span class="pill">4 événements</span>
          </div>

          <div class="cycles" style="grid-template-columns: repeat(3, 1fr); margin-top:12px">
            <div class="cycle" style="background:#fff"><div class="p-name">Nausées/Vomissements</div><div class="p-proto">Nausées et vomissements chimio-induits</div></div>
            <div class="cycle" style="background:#fff"><div class="p-name">Diarrhée</div><div class="p-proto">Diarrhée chimio-induite</div></div>
            <div class="cycle" style="background:#fff"><div class="p-name">Mucite</div><div class="p-proto">Inflammation des muqueuses</div></div>
          </div>

          <div class="cycles" style="grid-template-columns: repeat(3, 1fr); margin-top:10px">
            <div class="cycle" style="background:#fff"><div class="p-name">Constipation</div><div class="p-proto">Constipation chimio-induite</div></div>
          </div>
        </div>
      </div>

      <div class="view" id="ei-history">
        <div class="panel-title" style="margin-top:6px;">
          <span style="width:30px;height:30px;border-radius:10px;background:#f1f5f9;display:grid;place-items:center;color:#64748b">
            <i class="fa-regular fa-clock"></i>
          </span>
          Historique des Événements Indésirables
        </div>

        <div class="patient-card" style="margin-top:14px; text-align:center; padding: 40px 14px;">
          <div style="font-size:42px; color:#cbd5e1"><i class="fa-solid fa-triangle-exclamation"></i></div>
          <div style="margin-top:10px; font-weight:900; color:#64748b">Aucun événement indésirable enregistré</div>
          <div style="margin-top:6px; color:#94a3b8; font-weight:700; font-size:12px">Les événements déclarés apparaîtront ici</div>
        </div>

        <div class="patient-card" style="margin-top:14px;">
          <div class="panel-title"><i class="fa-solid fa-wave-square" style="color:#2f6fed"></i> Validation Oncologue</div>
          <div class="panel-sub">Consultations et validations oncologiques</div>

          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
            <div class="p-left">
              <div class="avatar"><i class="fa-solid fa-user"></i></div>
              <div>
                <div class="p-name">Validation Oncologue</div>
              </div>
            </div>
            <span class="pill">0 en attente</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== VIEW: DOCUMENTS ===== -->
    <section class="panel view" id="view-docs">
      <div class="panel-title"><i class="fa-solid fa-file-medical" style="color:#2563eb"></i> Prescriptions et Documents</div>
      <div class="panel-sub">Gérez les prescriptions et rapports médicaux</div>

      <div class="filters">
        <div class="field">
          <label><i class="fa-solid fa-user"></i> Patient</label>
          <select>
            <option>Tous les patients</option>
            <option>Gabriel I.</option>
            <option>Brian R.</option>
          </select>
        </div>
        <div class="field">
          <label><i class="fa-regular fa-file-lines"></i> Type de document</label>
          <select>
            <option>Tous les types</option>
            <option>Prescription</option>
            <option>Résultats</option>
          </select>
        </div>
        <div class="field">
          <label><i class="fa-solid fa-filter"></i> Statut</label>
          <select>
            <option>Tous les statuts</option>
            <option>Approuvé</option>
            <option>En attente</option>
          </select>
        </div>
        <button class="btn-add" type="button">
          <i class="fa-solid fa-upload"></i> Ajouter un document
        </button>
      </div>

      <div class="doc-block">
        <div class="doc-head">
          <i class="fa-solid fa-user"></i> Gabriel I. <span class="pill">2 document(s)</span>
        </div>
        <div class="panel-sub" style="margin-top:6px">FOLFOX - Cure 4/12</div>

        <div class="doc-item">
          <div>
            <h4><i class="fa-regular fa-file-lines"></i> Prescription FOLFOX - Cycle 3 <span class="badge ok">Approuvé</span></h4>
            <p>Prescription pour la cure de chimiothérapie FOLFOX cycle 3</p>
            <p><i class="fa-regular fa-calendar"></i> 15/01/2024 &nbsp;&nbsp; <i class="fa-regular fa-user"></i> Dr. Martin &nbsp;&nbsp; Cure 3</p>
          </div>
          <div class="doc-actions">
            <button class="icon-btn" title="Voir"><i class="fa-regular fa-eye"></i></button>
            <button class="icon-btn" title="Télécharger"><i class="fa-solid fa-download"></i></button>
          </div>
        </div>

        <div class="doc-item">
          <div>
            <h4><i class="fa-regular fa-file-lines"></i> Résultats NFS - 12/01/2024 <span class="badge ok">Approuvé</span></h4>
            <p>Numération formule sanguine avant cure 3</p>
            <p><i class="fa-regular fa-calendar"></i> 12/01/2024 &nbsp;&nbsp; <i class="fa-solid fa-flask"></i> Résultats de laboratoire &nbsp;&nbsp; Cure 3</p>
          </div>
          <div class="doc-actions">
            <button class="icon-btn" title="Voir"><i class="fa-regular fa-eye"></i></button>
            <button class="icon-btn" title="Télécharger"><i class="fa-solid fa-download"></i></button>
          </div>
        </div>
      </div>

      <div class="doc-block">
        <div class="doc-head">
          <i class="fa-solid fa-user"></i> Brian R. <span class="pill">1 document(s)</span>
        </div>
        <div class="panel-sub" style="margin-top:6px">FOLFIRINOX - Cure 8/12</div>

        <div class="doc-item">
          <div>
            <h4><i class="fa-regular fa-file-lines"></i> Consultation de suivi - Cycle 2 <span class="badge warn">En attente de révision</span></h4>
            <p>Note de consultation post-cure 2</p>
            <p><i class="fa-regular fa-calendar"></i> 18/01/2024 &nbsp;&nbsp; <i class="fa-regular fa-user"></i> Dr. Dubois &nbsp;&nbsp; Cure 2</p>
          </div>
          <div class="doc-actions">
            <button class="icon-btn" title="Voir"><i class="fa-regular fa-eye"></i></button>
            <button class="icon-btn" title="Télécharger"><i class="fa-solid fa-download"></i></button>
            <button class="icon-btn" title="Valider"><i class="fa-solid fa-check"></i></button>
            <button class="icon-btn" title="Refuser"><i class="fa-solid fa-xmark"></i></button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== VIEW: CALENDRIER ===== -->
    <section class="panel view" id="view-cal">
      <div class="panel-title"><i class="fa-regular fa-calendar-days" style="color:#2563eb"></i> Vue Calendrier</div>
      <div class="panel-sub">Visualisez toutes les cures programmées</div>

      <div class="patient-card" style="margin-top:10px">
        <div class="panel-title"><i class="fa-regular fa-calendar"></i> Calendrier des Cures</div>

        <div class="cal-head">
          <div></div>
          <div class="cal-nav">
            <button class="cal-btn" type="button"><i class="fa-solid fa-chevron-left"></i></button>
            <div class="cal-month">décembre 2025</div>
            <button class="cal-btn" type="button"><i class="fa-solid fa-chevron-right"></i></button>
          </div>
        </div>

        <div class="cal-grid">
          <div class="cal-dayname">Lun</div><div class="cal-dayname">Mar</div><div class="cal-dayname">Mer</div>
          <div class="cal-dayname">Jeu</div><div class="cal-dayname">Ven</div><div class="cal-dayname">Sam</div><div class="cal-dayname">Dim</div>

          <!-- 1..31 (simple mock) -->
          ${""}
        </div>

        <div id="calCells"></div>
      </div>
    </section>
  </div>

  <!-- ===== Modal Reprogrammation intelligente ===== -->
  <div class="modal" id="reprogModal" aria-hidden="true">
    <div class="backdrop" data-close="1"></div>

    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="reprogTitle">
      <div class="modal-head">
        <div class="modal-title" id="reprogTitle">
          <i class="fa-solid fa-wand-magic-sparkles" style="color:#2f6fed"></i>
          Reprogrammation intelligente
        </div>
        <button class="xbtn" type="button" aria-label="Fermer" data-close="1"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <div class="modal-body">
        <div class="modal-patient" id="modalPatientBox">
          Brian R.
          <small>Cure 2 - 13 janvier 2026<br>Protocole: FOLFIRINOX</small>
        </div>

        <div class="form">
          <div>
            <label>Motif de la reprogrammation</label>
            <select>
              <option>Patient indisponible</option>
              <option>Contrainte médicale</option>
              <option>Manque de ressources</option>
              <option>Autre</option>
            </select>
          </div>

          <button class="suggest" type="button">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            Suggérer automatiquement la meilleure date
          </button>

          <div>
            <label>Date sélectionnée</label>
            <input type="date" />
          </div>

          <div class="modal-actions">
            <button class="btn primary" type="button">Confirmer la reprogrammation</button>
            <button class="btn" type="button" data-close="1">Annuler</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== Inner tabs (Planification / Suivi / Docs / Cal) =====
    const innerTabs = [...document.querySelectorAll(".inner-tab")];
    const innerViews = {
      planif: document.getElementById("view-planif"),
      suivi: document.getElementById("view-suivi"),
      docs: document.getElementById("view-docs"),
      cal: document.getElementById("view-cal"),
    };

    function setInner(view){
      innerTabs.forEach(b => b.classList.toggle("active", b.dataset.view === view));
      Object.entries(innerViews).forEach(([k,el]) => el.classList.toggle("active", k === view));
    }
    innerTabs.forEach(b => b.addEventListener("click", () => setInner(b.dataset.view)));

    // ===== EI sub tabs =====
    const eiBtns = [...document.querySelectorAll(".ei-top-tabs button")];
    const eiViews = {
      declare: document.getElementById("ei-declare"),
      base: document.getElementById("ei-base"),
      history: document.getElementById("ei-history"),
    };
    function setEi(v){
      eiBtns.forEach(b => b.classList.toggle("active", b.dataset.ei === v));
      Object.entries(eiViews).forEach(([k,el]) => el.classList.toggle("active", k === v));
    }
    eiBtns.forEach(b => b.addEventListener("click", () => setEi(b.dataset.ei)));

    // ===== Calendar cells (simple) =====
    const calWrap = document.getElementById("calCells");
    const dayNamesRow = document.querySelector("#view-cal .cal-grid");
    // on recrée les 31 cases sous les daynames (mock comme ton screen)
    const grid = document.createElement("div");
    grid.className = "cal-grid";
    grid.style.marginTop = "10px";
    grid.innerHTML = Array.from({length:31}, (_,i) => {
      const d = i+1;
      const active = (d === 30) ? "active" : "";
      return `<div class="cal-cell ${active}"><div class="n">${d}</div></div>`;
    }).join("");
    calWrap.appendChild(grid);

    // ===== Modal Reprogrammation =====
    const modal = document.getElementById("reprogModal");
    const modalPatientBox = document.getElementById("modalPatientBox");

    const reprogDetails = {
      "Brian R.": { cure:"Cure 2 - 13 janvier 2026", proto:"FOLFIRINOX" },
      "Tittly F.": { cure:"Cure 2 - 13 janvier 2026", proto:"FOLFIRINOX" },
    };

    function openReprog(name){
      const d = reprogDetails[name] || { cure:"Cure —", proto:"—" };
      modalPatientBox.innerHTML = `${name}<small>${d.cure}<br>Protocole: ${d.proto}</small>`;
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }
    function closeReprog(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    document.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-action='open-reprog']");
      if(btn) openReprog(btn.dataset.name);

      if(modal.classList.contains("open") && e.target.closest("[data-close='1']")) closeReprog();
    });

    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && modal.classList.contains("open")) closeReprog();
    });
  </script>
</body>
</html>
